# Linux

## №1. Установка Ubuntu Linux

Дистрибутив Linux - Ubuntu установлен второй операционной системой рядом
с Windows 10.

![Ubuntu установлена](img/1.png)

## №2. Первичная настройка Ubuntu Linux

Соединение по домашнему wi-fi работает

![Яндекс пингуется](img/2.png)

Средства коммуникации установлены

![Pidgin, Skype, Thunderbird](img/3.png)

## №3. Знакомство с консолью

* `man` - показывает страницу документации к консольной программе
* `cd` - сменить текущую директорию
* `ls` - посмотреть содержимое каталога
* `./` - текущий каталог
* `../` - родительский каталог
* `.~` - домашний каталог
* `/` корень файловой системы
* _абсолютный путь_ - путь, начиная с корня до конкретного файла: `/home/username`
* _отностельный путь_ - путь, относительно текущего каталога к заданому файлу: `../../project/js`

Приложения в bash можно запустить таким образом: `./program` или указав абсолютный путь
при этом должно быть достаточно прав на запуск программы а также у программы должен стоять атрибут  `+x` (разрешить исполнение)

Существует возможность перенаправлять потоки ввода, вывода, ошибок, а также делать некоторые
другие ухищрение подобного вида:
* `program < file.txt` - file.txt будет stdin программы
* `program > file.txt` - file.txt будет stdout программы
* `program 2> file.txt` - file.txt будет stderr программы
* `program >> file.txt` - добавить stdout программы в конец файла file.txt
* `program1 | program2` - конвейер, т.е. stdout program1 будет stdin program2

Все эти штуковины можно комбинировать: `program < in.txt 2> error.txt | other_program`,
`cat test.rb  | wc -l > line_count.txt`

Запустить процесс в фоне можно набрав `program &` или `program`, нажать `ctrl+z` и далее ввести `bg`
* `jobs` - выводит список задач в текущем bashе
* `fg` - перевести задачу на передний план, т.е. отображается в bashe
* `bg` - перевести задачу в фоновый режим, работает и не отображается в bashe

Остановить приложение можно, послав сигнал:
* SIGSTOP - приостановить процесс
* SIGTSTOP (`ctrl+z` в bash) - приостановить процесс
* SIGTERM - "завершись, пожалуйста", процесс завершиться нормально и освободит ресурсы
* SIGINT (`ctrl+c` в bash) - "завершись", завершить процесс, сигнал может быть проигнорирован
* SIGKILL - "прибить тапочком", убивает процесс, данный сигнал не может быть проигнорирован

Пример: запускаем telnet, что-то делаем и выходим нажатием `ctrl+c`

Команда `kill` - позволяет послать сигнал процессу

Команда `ps` - выводит информацию о запущенных процессах в системе

## №4. Знакомство с текстовым редактором Vim

Текстовый редактор vim имеет несколько режимов:
1. Режим команд - принимает ввод команд
2. Режим вставки - вводит набираемый текст
3. Визуальный режим - выделение текста

В командный режим можно перейти нажав `esc`, в остальные режимы необходимо переходить через командный режим. Для перехода в режим вставки можно нажать `i` для вставки текста в текущей позиции курсора, для перехода в визуальный режим `v`, `V`, `ctrl+v` - выделение символов, строк, прямоугольных областей текста соответственно.

Vim позволяет открывать несколько файлов, он имеет следующие подходы к работе с ними:
* Вкладки (вкладки, табы как в том же chrome, sublime text и т.д.)
* Буферы (своеобразный сеанс работы с файлом, похож на владки, но немного отличается)

При работе со вкладками vim запускается с опцией `-p` после которой указываются файлы.
Манипулировать вкладками можно следующими командами и сочетаниями клавиш:
* `:tabnew [имя_файла]` - открыть новую вкладку
* `:tabs` - список открытых вкладок
* `gt` или `:tabn` - следующая вкладка
* `gT` или `:tabp` - предыдущая вкладка
* `:tabfirst` - первая вкладка
* `:tablast` - последняя вкладка

При работе с буферами vim запускается с перечислением файлов, которые необходимо открыть.
Манипулировать буферами можно следующими способами:
* `:bn` - следующий буфер
* `:bp` - предыдущий буфер
* `:ls` - просмотреть список открытых буферов
* `:b имя_буфера` - переключиться на буфер по его имени
* `:bd [имя_буфера]` - удалить буфер по имени или текущий

> Всё остальное постигаем в "консольной обучалке" `vimtutor`

## №5. Знакомство с языком bash

```
#!/bin/bash

#
# Первый скрипт в лучших традициях
#

echo "Hello, world !"
```

Далее приведу несколько примеров собственных решений практический заданий с платформы
[stepik.org](https://stepik.org) курса ["Введение в Linux"](https://stepik.org/course/73).

```
#!/bin/bash

#
# Условие: Напишите скрипт на bash, который принимает на вход один аргумент
# (целое число от 0 до бесконечности),
# который будет обозначать число студентов в аудитории.
# В зависимости от значения числа нужно вывести разные сообщения
#
# P.S. Моё решение практического задания: stepik.org (Введение в Linux — 3 Продвинутые темы)
#

if [[ $1 -eq 0 ]]
then
	echo "No students"
elif [[ $1 -lt 5 ]]
then
	if [[ $1 -eq 1 ]]
	then
		echo "1 student"
	else
		echo "$1 students"
	fi
else
	echo "A lot of students"
fi

```

```
#!/bin/bash

#
# Условие: Напишите скрипт на bash, который будет определять в какую возрастную группу
# попадают пользователи. При запуске скрипт должен вывести сообщение "enter your name:"
# и ждать от пользователя ввода имени (используйте read, чтобы прочитать его).
# Когда имя введено, то скрипт должен написать "enter your age:" и ждать ввода возраста
# (опять нужен read). Когда возраст введен, скрипт пишет на экран
# "<Имя>, your group is <группа>", где <группа> определяется на основе возраста
# по следующим правилам:
#   * младше либо равно 16: "child",
#   * от 17 до 25 (включительно): "youth",
#   * старше 25: "adult".
#
# P.S. Моё решение практического задания: stepik.org (Введение в Linux — 3 Продвинутые темы)
#

while [[ 1 ]]
do
	echo "enter your name:"
	read name
	if [[ -z $name ]]
	then
		break
	fi

	echo "enter your age:"
	read age
	if [[ $age -eq 0 ]]
	then
		break
	fi

	# младше либо равно 16: "child",
	# от 17 до 25 (включительно): "youth",
	# старше 25: "adult".

	group="adult"
	if [[ $age -le 16 ]]
	then
		group="child"
	elif [[ $age -ge 17 && $age -le 25 ]]
	then
		group="youth"
	fi

	echo "$name, your group is $group"
done

echo "bye"

```

```
#!/bin/bash

#
# Условие: Напишите калькулятор на bash. При запуске ваш скрипт должен ожидать ввода
# пользователем команды (при этом на экран выводить ничего не нужно).
# Команды могут быть трех типов:
#   * Слово "exit". В этом случае скрипт должен вывести на экран слово "bye" и завершить работу.
#   * Три аргумента через пробел -- первый операнд (целое число), операция (одна из "+", "-", "*", #     "/", "%", "**")
#     и второй операнд (целое число). В этом случае нужно произвести указанную
#     операцию над заданными числами и вывести результат на экран. После этого переходим в режим
#     ожидания новой команды.
#   * Любая другая команда из одного аргумента или из трех аргументов, но с операцией не из списка.
#     В этом случае нужно вывести на экран слово "error" и завершить работу.
#
# P.S. Моё решение практического задания: stepik.org (Введение в Linux — 3 Продвинутые темы)
#

while [[ 1 ]]
do

	read a b c
	if [[ $a = "exit" ]]
	then
		echo "bye"
		break
	fi

	r=0
	case $b in
	"+")
		let "r=a+c"
		;;
	"-")
		let "r=a-c"
		;;
	"*")
		let "r=a*c"
		;;
	"/")
		if [[ c -eq 0 ]]
		then
			echo "error"
			break
		fi
		let "r=a/c"
		;;
	"%")
		if [[ c -eq 0 ]]
		then
			echo "error"
			break
		fi
		let "r=a%c"
		;;
	"**")
		let "r=a**c"
		;;
	*)
		echo "error"
		break
	esac

	echo $r
done

```

## №6. Знакомство с SSH и SCP

**SSH** - (Secure SHell) - протокол безопасного соединения с удалёным сервером.
* `ssh-keygen` - утилита, которая генерирует приватный и публичный ключи
* `ssh-add` - утилита, повзоляющая не вводить постоянно пароли и ключи на сервере
* `ssh username@servername -p 1234` - соединиться с сервером
* `scp` - утилита позволяет копировать файлы с сервера на локальный компьютер или наоборот

## №7. Знакомство с основными утилитами

* `grep` - позволяет искать текст в файлах по шаблону
* `find` - поиск файлов по шаблону
* `wget` - позволяет загрузить файлы из интернета по указаному адресу
* `top` - консольный диспетчер задач
* `tail` - выводит хвост файла
* `head` - выводит голову файла
* `wc` - подсчёт количества букв, строк и т.п. в файле
* `sort` - сортировка строк файла или слияние файлов
* `uniq` - фильтрация строк в файле по уникальности

## №8. Знакомство с crontab

Скрипт, который выводит текущее время и дату в файл
/tmp/cron_test. Этот скрипт запускается раз в 2 минуты с использованием crontab.

```
    touch ./mycron
    echo "*/1 * * * * date >> /tmp/cron_test" > mycron
    crontab mycron
```

## №9. Знакомство с git

База по VCS Git изучена.
